{% extends 'template_base.html' %}
    {% block style %}
        <link rel="stylesheet" href="static/style/base.css">
    {% endblock %}
    {% block conteudo %}
    <div id="perfil_content">
        <aside class="aside_perfil">
            <div id="box_voltar">
                <button id="bt_voltar" onclick="window.history.back()">Voltar</button>
            </div>
        
            <h1>Escolha seu Avatar</h1>
            <div style="position: relative; display: inline-block;">
                <div class="preview" id="avatarPreview" >üë§</div>
                <button id="bt_trocar_foto" onclick="abrirModal()">
                    ‚úèÔ∏è
                </button>
            </div>
        
            <div id="perfil_info">
                <h3>Informa√ß√µes do Usu√°rio:</h3>
                {% if current_user.is_authenticated %}
                <p>Nome: {{current_user['nome']}}</p>
                <p>Email: {{current_user['email']}}</p>
                <p>Pontos:</p>
                {% else %}
                <p style="margin-top: 20px; margin-left: 20px; color: red;">Voc√™ ainda n√£o possui cadastro ou n√£o fez login</p>
                {% endif %}
            </div>
        
            <div id="modal" style="display:none;">
                <div id="modal_content">
                    <span onclick="fecharModal()" style="cursor:pointer;">&times;</span>
                    <h3>Escolha seu Avatar</h3>
                    <div class="avatar-selection">
                        <div class="avatar" onclick="selectAvatar('üê∂')">üê∂</div>
                        <div class="avatar" onclick="selectAvatar('üê±')">üê±</div>
                        <div class="avatar" onclick="selectAvatar('üêª')">üêª</div>
                        <div class="avatar" onclick="selectAvatar('üê¢')">üê¢</div>
                    </div>
                    <h3>Escolha a Cor</h3>
                    <div class="color-selection">
                        <div class="color" style="background-color: #FF5733;" onclick="selectColor(this)"></div>
                        <div class="color" style="background-color: #33FF57;" onclick="selectColor(this)"></div>
                        <div class="color" style="background-color: #5733FF;" onclick="selectColor(this)"></div>
                        <div class="color" style="background-color: #FF33A8;" onclick="selectColor(this)"></div>
                    </div>
                </div>
            </div>
            
        </aside>
        <section class="section_perfil">
        
            <div class="box_perfil">
                
        
                
                <div id="title_trf">
                    <h1>Trofeus Quiz</h1>
                </div>
                {% if trofeu_quiz %}
                <div class="container_trf">
                    {% if trofeu_quiz == 1 %}
                        <div class="trofeus-1">
                        </div>
                    {% endif %}
                    {% if trofeu_quiz == 2 %}
                        <div class="trofeus-1">
                        </div>
                        <div class="trofeus-2">
                        </div>
                    {% endif %}
                    {% if trofeu_quiz == 3 %}
                        <div class="trofeus-1">
                        </div>
                        <div class="trofeus-2">
                        </div>
                        <div class="trofeus-3">
                        </div>
                    {% endif %}
                </div>
                {% endif %}
                

                <div id="title_trf">
                    <h1>Trofeus Quebra-Cabe√ßa</h1>
                </div>
                {% if trofeu_qcbc %}
                <div class="container_trf">
                    {% if trofeu_qcbc == 1 %}
                        <div class="trofeus-1">
                        </div>
                    {% endif %}
                    {% if trofeu_qcbc == 2 %}
                        <div class="trofeus-1">
                        </div>
                        <div class="trofeus-2">
                        </div>
                    {% endif %}
                    {% if trofeu_qcbc == 3 %}
                        <div class="trofeus-1">
                        </div>
                        <div class="trofeus-2">
                        </div>
                        <div class="trofeus-3">
                        </div>
                    {% endif %}
                </div>
                {% endif %}

                <div id="title_trf">
                    <h1>Trofeus Trilha da Raposa</h1>
                </div>
                {% if trofeu_trilha %}
                <div class="container_trf">
                    {% if trofeu_trilha == 1 %}
                        <div class="trofeus-1">
                        </div>
                    {% endif %}
                    {% if trofeu_trilha == 2 %}
                        <div class="trofeus-1">
                        </div>
                        <div class="trofeus-2">
                        </div>
                    {% endif %}
                    {% if trofeu_trilha == 3 %}
                        <div class="trofeus-1">
                        </div>
                        <div class="trofeus-2">
                        </div>
                        <div class="trofeus-3">
                        </div>
                    {% endif %}
                </div>
                {% endif %}

                </div>
            </div>
        </section>
    </div>
    {% endblock %}
    {% block js %}
    <script>
        let selectedColor = '#00AEEF';

        function abrirModal() {
            document.getElementById('modal').style.display = 'flex';
        }

        function fecharModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function selectAvatar(emoji) {
            const preview = document.getElementById('avatarPreview');
            preview.textContent = emoji;
            preview.style.backgroundColor = selectedColor;
            fecharModal();
        }

        function selectColor(element) {
            const colors = document.querySelectorAll('.color');
            colors.forEach(color => color.classList.remove('selected'));
            element.classList.add('selected');
            selectedColor = element.style.backgroundColor;
            const preview = document.getElementById('avatarPreview');
            preview.style.backgroundColor = selectedColor;
        }
    </script>
    {% endblock %}